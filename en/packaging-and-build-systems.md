# Packaging

The OCaml toolchain is structured much like a C compiler, with several tools
that generate intermediate files and finally link against a runtime.  The
final outputs don't have to be just executables. Many people embed OCaml code as
object files that are called from other applications, or even compile it to
Javascript and other esoteric targets.  Let's start by covering some of the
standard OCaml tools, and then move on to some of the higher level methods for
packaging and publishing your code online.

## The OCaml toolchain

There are two distinct compilers for OCaml code included in the standard
distribution. The first outputs bytecode that is interpreted at runtime, 
and the second generates fast, efficient native code directly. Both of these
share the front-end type-checking logic, and only diverge when it comes to
code generation.

### The `ocamlc` bytecode compiler

The simplest code generator is the `ocamlc` compiler, which outputs bytecode
that is interpreted via the `ocamlrun` runtime.  The OCaml bytecode virtual
machine is a stack machine (much like the Java Virtual Machine), with the
exception of a single register that stores the most recent result.  This
provides a simple runtime model that is easy to implement or embed within
other systems, but executes rather slowly due to being interpreted.

Here are some of the intermediate files generated by `ocamlc`:

Extension  Purpose
---------  -------
.ml        Source files for compilation unit module implementations.
.mli       Source files for compilation unit module interfaces. If missing, generated from the `.ml` file.
.cmi       Compiled module interface from a corresponding `.mli` source file.
.cmo       Compiled bytecode object file of the module implementation.
.cma       Library of bytecode object files packed into a single file.
.o         C source files are compiled into native object files by the system `cc`.

To obtain a bytecode executable, you need to compile a set of `cmo` object files, and then link them into an executable

### The `ocamlopt` native code compiler

Extension  Purpose
---------  -------
.cmi       Compiled module interface from a corresponding `.mli` source file. (_avsm_: this is not compatible with the ocamlc version iirc)
.o         Compiled native object file of the module implementation.
.cmx       Contains extra information for linking and cross-module optimization of the object file.
.cmxa/.a   Library of `cmx` and `o` units, stored in the `cmxa` and `a` files respectively.

### The `ocaml` toplevel loop

## The Findlib compiler frontend

## Packaging applications with OASIS 

### ocamlbuild

## Distributing applications with OPAM

