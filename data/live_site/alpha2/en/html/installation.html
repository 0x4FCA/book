<html>

    <head>
    
        <meta charset="utf-8"/>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="robots" content="NOINDEX, NOARCHIVE, NOFOLLOW"/>
        
        <title>Chapter 13. Installation / Real World OCaml</title>
        
        <link rel="stylesheet" href="../../media/css/main.css"/>
        
        <script src="../../media/js/require.js" data-main="../../media/js/main.js"> </script>
        <script>
            require.config({
                config: {
                    gitHub: {
                        user: 'ocamllabs',
                        repo: 'rwo\u002Dcomments',
                        milestone: 'alpha2',
                        page: 'installation.html'
                    }
                }
            });
        </script>
        
    
    </head>
    
    <body>
    
        <div class="body">
        
            <header class="header">
                <h1><img src="../../media/img/header.png" width="213" height="59" alt="Real World OCaml, by Jason Hickey, Anil Madhavapeddy and Yaron Minsky"/></h1>
            </header>
    
            <nav class="navigation">
                <ul>
                    <li>
                        <a href="index.html">Table of Contents</a>
                    </li>
                    
                        <li>
                            <a href="pt01.html">I. Basic Concepts</a>
                            
                                
                            
                        </li>
                    
                        <li>
                            <a href="pt02.html">II. Practical Examples</a>
                            
                                
                            
                        </li>
                    
                        <li>
                            <a href="pt03.html">III. Advanced Topics</a>
                            
                                 
                                    <ul>
                                        
                                            <li>
                                                <a href="object-subtyping-and-inheritance.html">12. Object Subtyping and Inheritance</a>
                                            </li>
                                        
                                            <li>
                                                <a href="installation.html" class="here">13. Installation</a>
                                            </li>
                                        
                                    </ul>
                                
                            
                        </li>
                    
                </ul>
            </nav>
        
            <article class="page">
        
                <h1>Chapter 13. Installation</h1>
                
                

    <p id="idp9104096">
    The easiest way to install OCaml is via the binary packages
    available in many operating systems. For day-to-day code
    development, it is easier to use a source-based manager that lets
    you recompile individual libraries easily.
  </p><p id="idp9104736">
    For the purposes of this book, we'll use the OPAM source manager.
    There are other alternatives available such as GODI and ODB, but not
    covered here. Let's get started with OPAM now, as you will need it
    to run the examples in the rest of the book. OPAM manages multiple
    simultaneous OCaml compiler and library installations, tracks
    library versions across upgrades, and recompiles dependencies
    automatically if they get out of date.
  </p><section><h1 id="opam-base-installation">OPAM Base Installation</h1><p id="idp9106752">
      To install OPAM, you will need a working OCaml installation to
      bootstrap the package manager. Once installed, all of the OPAM
      state is held in the <code>$HOME/.opam</code> directory, and
      you can reinitialise it by deleting this directory and starting
      over.
    </p><aside class="important"><h1>
    OCamlfind and OPAM
    </h1><p id="idp9108800">
      OPAM maintains multiple compiler and library installations, but
      this can clash with a global installation of the
      <code>ocamlfind</code> tool. Uninstall any existing copies
      of <code>ocamlfind</code> before installing OPAM, and use
      the OPAM version instead.
    </p></aside><section><h1 id="macos-x">MacOS X</h1><p id="idp9112128">
        The easiest way to install OCaml on MacOS X is via the
        <code>homebrew</code> package manager, available from
        [http://github.com/mxcl/homebrew].
      </p><pre id="idp9113392">
$ brew install ocaml
$ brew install opam
</pre></section><section><h1 id="linux">Linux</h1><p id="idp9115328">
        On Debian Linux, you should install OCaml via binary packages,
        and then install the latest OPAM release from source.
      </p><pre id="idp9115872">
$ sudo apt-get install build-essential ocaml ocaml-native-compilers camlp4-extra git
 tar -jxvf opam-&lt;version&gt;.tar.gz
$ cd opam-&lt;version&gt;.tar.gz
$ ./configure &amp;&amp; make &amp;&amp; sudo make install
</pre><p id="idp9116752">
        On Fedora/RHEL...?
      </p></section><section><h1 id="windows">Windows</h1><p id="idp9118352">
        Investigate Protzenko's Windows installer.
      </p></section><section><h1 id="using-the-opam-top-level">Using the OPAM top-level</h1><p id="idp9120080">
        All of the OPAM state is held in the <code>.opam</code>
        directory in your home directory, including compiler
        installations. You should never need to switch to an admin user
        to install packages.
      </p><pre id="idp9121408">
$ opam init
$ opam install utop async core_extra
$ eval `opam config -env`
</pre><p id="idp9122160">
        This will initialise OPAM with the default package set from
        <code>opam.ocamlpro.com</code>, and install the
        <code>utop</code> interactive top-level and the
        <code>Async</code> library. OPAM figures out the minimal
        set of dependencies required, and installs those too. The
        <code>eval</code> command is sets your
        <code>PATH</code> variable to point to the current active
        compiler, and you should add this to your shell
        <code>.profile</code> to run every time you open a new
        command shell.
      </p></section><section><h1 id="switching-compiler-versions">Switching compiler versions</h1><p id="idp9128576">
        The default compiler installed by OPAM uses the system OCaml
        installation. You can use <code>opam switch</code> to swap
        between different compiler versions, or experiment with a
        different set of libraries or new compiler versions. For
        instance, one of the alternate compilers is patched to simplify
        the types that are output in the top-level. You can switch it to
        by:
      </p><pre id="idp9130096">
$ opam switch -list
$ opam switch 4.00.1+short-types
$ eval `opam config -env`
$ opam install utop async_extra
</pre><p id="idp9130880">
        The new compiler will be compiled and installed into
        <code>~/.opam/4.00.1+short-types</code> and the libraries
        will be tracked separately from your system installation. You
        can have any number of compilers installed simultaneously, but
        only one can be active at any time.
      </p></section></section><section><h1 id="editing-environment">Editing Environment</h1><section><h1 id="command-line">Command Line</h1><p id="idp9134720">
        The <code>utop</code> tool provides a convenient
        interactive top-level, with full command history, command macros
        and module name completion. An <code>.ocamlinit</code>
        file in your home directory will initialise
        <code>utop</code> with common libraries and syntax
        extensions open, e.g.:
      </p><div class="highlight"><pre><span class="o">#</span><span class="n">use</span> <span class="s2">&quot;topfind&quot;</span>
<span class="o">#</span><span class="n">camlp4o</span>
<span class="o">#</span><span class="n">thread</span>
<span class="o">#</span><span class="n">require</span> <span class="s2">&quot;core.top&quot;</span><span class="o">;;</span>
<span class="o">#</span><span class="n">require</span> <span class="s2">&quot;async&quot;</span><span class="o">;;</span>
<span class="k">open</span> <span class="nn">Core</span><span class="p">.</span><span class="nc">Std</span>
<span class="k">open</span> <span class="nn">Async</span><span class="p">.</span><span class="nc">Std</span>
</pre></div><p id="idp9138704">
        TODO: the <code>.ocamlinit</code> handling in OPAM is
        being finalised and is tracked in
        <a href="https://github.com/OCamlPro/opam/issues/185" target="_top">issue
        185</a>.
      </p></section><section><h1 id="editors">Editors</h1><p id="idp9141856">
        Emacs users have tuareg and
        <a href="http://www.typerex.org/" target="_top">Typerex</a>.
      </p><p id="idp9143024">
        Vim users can use the built-in style, and
        <a href="http://github.com/avsm/ocaml-annot" target="_top">ocaml-annot</a>
        may also be useful.
      </p><p id="idp9144240">
        Eclipse plugins: which one is maintained?
      </p></section></section><section><h1 id="developing-with-opam">Developing with OPAM</h1><p id="idp9146064">
      Package listings are obtained by adding
      <span><em>remotes</em></span> that provide package descriptions,
      installation instructions and URLs.
    </p></section>


                
            </article>
            
            
    
                <nav class="pagination">
                    
                        <a rel="previous" href="object-subtyping-and-inheritance.html">
                            &lt; Previous
                        </a>
                    
                    
                </nav>
            
            
            
            <footer class="footer">
                <p>Copyright 2012-2013, Jason Hickey, Anil Madhavapeddy and Yaron Minsky.</p>
            </footer>
            
        </div>
    
    </body>

</html>