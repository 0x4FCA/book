<!DOCTYPE html>
<html>

    <head>
    
        <meta charset="utf-8"/>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="robots" content="NOINDEX, NOARCHIVE, NOFOLLOW"/>
        
        <title>Appendix A. Installation / Real World OCaml</title>
        
        <link rel="stylesheet" href="../../media/css/main.css"/>
        
        <script src="../../media/js/require.js" data-main="../../media/js/main.js"> </script>
        <script>
            require.config({
                config: {
                    gitHub: {
                        user: 'ocamllabs',
                        repo: 'rwo\u002Dcomments',
                        milestone: 'beta3',
                        page: 'installation.html'
                    }
                }
            });
        </script>
        
    
    </head>
    
    <body>
    
        <div class="body">
        
            <header class="header">
                <h1><img src="../../media/img/header.png" width="213" height="59" alt="Real World OCaml, by Jason Hickey, Anil Madhavapeddy and Yaron Minsky"/></h1>
            </header>
    
            <nav class="navigation">
                <ul>
                    <li>
                        <a href="index.html">Table of Contents</a>
                    </li>
                    
                        <li>
                            <a href="prologue.html">Prologue</a>
                            
                                
                            
                        </li>
                    
                        <li>
                            <a href="pt01.html">I. Language Concepts</a>
                            
                                
                            
                        </li>
                    
                        <li>
                            <a href="pt02.html">II. Tools and Techniques</a>
                            
                                
                            
                        </li>
                    
                        <li>
                            <a href="pt03.html">III. The Runtime System</a>
                            
                                
                            
                        </li>
                    
                        <li>
                            <a href="installation.html" class="here">A. Installation</a>
                            
                                 
                                    <ul>
                                        
                                            <li>
                                                <a href="installation.html#getting-ocaml">Getting OCaml</a>
                                            </li>
                                        
                                            <li>
                                                <a href="installation.html#getting-opam">Getting OPAM</a>
                                            </li>
                                        
                                            <li>
                                                <a href="installation.html#configuring-opam">Configuring OPAM</a>
                                            </li>
                                        
                                            <li>
                                                <a href="installation.html#editing-environment">Editing Environment</a>
                                            </li>
                                        
                                    </ul>
                                
                            
                        </li>
                    
                </ul>
            </nav>
        
            <article class="page">
        
                <h1>Appendix A. Installation</h1>
                
                

    <p id="idp12477040">
    To work through Real World OCaml, you'll need the following software
    packages installed:
  </p><ul><li><p id="idp12478048">
<a href="http://ocaml.org" target="_top">OCaml</a> version 4.1.0 or
        greater. This book uses some tools that we've developed while
        writing it, and so you need to ensure that you have at least
        this version before trying the examples in the book.
      </p></li><li><p id="idp12479744">
<a href="http://opam.ocaml.org" target="_top">OPAM</a> version 1.0 or
        greater. This will give you access to all the OCaml libraries
        used in Real World OCaml.
      </p></li><li><p id="idp12481344">
<a href="https://github.com/diml/utop" target="_top">Utop</a> is a
        modern interactive toplevel with command history, tab
        completion, and defaults that are tuned to work with the
        examples in Real World OCaml.
      </p></li></ul><p id="idp12482880">
    The easiest way to install OCaml is usually via the binary packages
    available for many operating systems. For day-to-day code
    development however, it's much easier to use a source-code manager
    that lets you modify individual libraries and automatically
    recompile all the dependencies.
  </p><p id="idp12483584">
    An important difference between OCaml and scripting languages such
    as Python or Ruby is the static type safety that means that you
    can't just mix-and-match compiled libraries. Interfaces are checked
    when libraries are compiled, so when an interface is changed, all
    the dependent libraries must also be recompiled. Source-based
    package managers such as OPAM automate this process for you and make
    development life much easier.
  </p><section><h1 id="getting-ocaml">Getting OCaml</h1><p id="idp12485600">
      The OCaml compiler is available as a binary distribution on many
      operating systems. This is the simplest and preferred installation
      route, but we'll also describe how to do a manual installation as
      a last resort.
    </p><section><h1 id="mac-os-x">Mac OS X</h1><p id="idp12487392">
        The
        <a href="http://github.com/mxcl/homebrew" target="_top">Homebrew</a>
        package manager has an OCaml installer, which is usually updated
        pretty quickly to the latest stable release. Make sure that you
        have the latest XCode (and Command Line Tools for XCode)
        installed from the App Store before starting the OCaml
        installation.
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> brew update
</div><div class="highlight"><span class="gp">$</span> brew install ocaml
</div><div class="highlight"><span class="gp">$</span> brew install pcre
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/brew_install.out">installation/brew_install.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12489552">
        The Perl-compatible Regular Expression library (PCRE) is used by
        the Core suite. It's not strictly needed to use OCaml, but is a
        commonly used library that we're installing now to save time
        later.
      </p><p id="idp12490192">
        Another popular package manager on Mac OS X is
        <a href="http://macports.org" target="_top">MacPorts</a>, which also
        has an OCaml port. As with Homebrew, make sure you have XCode
        installed and have followed the rest of the MacPorts
        installation instructions, and then type in:
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> sudo port install ocaml
</div><div class="highlight"><span class="gp">$</span> sudo port install ocaml-pcre
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/macports_install.out">installation/macports_install.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div></section><section><h1 id="debian-linux">Debian Linux</h1><p id="idp12493584">
        On Debian Linux, you should install OCaml via binary packages.
        You'll need at least OCaml version 3.12.1 to bootstrap OPAM,
        which means using Debian Wheezy or greater. Don't worry about
        getting the absolute latest version of the compiler, as you just
        need one new enough to compile the OPAM package manager, after
        which you'll use OPAM to manage your compiler installation.
      </p><div class="rwocode"><pre><code><div class="rwocodeout"># apt-get install \</div><div class="rwocodeout">  ocaml ocaml-native-compilers camlp4-extra \</div><div class="rwocodeout">  git libpcre3-dev curl build-essential m4</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/debian_apt.out">installation/debian_apt.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12495136">
        Notice that we've installed a few more packages than just the
        OCaml compiler here. The second command line installs enough
        system packages to let you build your own OCaml packages. You
        may find that some OCaml libraries require more system libraries
        (for example, <code>libssl-dev</code>), but we'll
        highlight these in the book when we introduce the library.
      </p></section><section><h1 id="fedora-and-red-hat">Fedora and Red Hat</h1><p id="idp12497904">
        OCaml has been included in the basic distribution since Fedora
        8. To install the latest compiler, just run:
      </p><div class="rwocode"><pre><code><div class="rwocodeout"># yum install ocaml</div><div class="rwocodeout"># yum install ocaml-camlp4-devel</div><div class="rwocodeout"># yum install pcre-devel</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/fedora_install.out">installation/fedora_install.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12499152">
        The PCRE package is used by Core and is just included here for
        convenience later.
      </p></section><section><h1 id="arch-linux">Arch Linux</h1><p id="idp12500944">
        Arch Linux provides OCaml 4.00.1 (or later) in the standard
        repositories, so the easiest method of installation is using
        <code>pacman</code>:
      </p><div class="rwocode"><pre><code><div class="rwocodeout"># pacman -Sy ocaml</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/arch_install.out">installation/arch_install.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div></section><section><h1 id="windows">Windows</h1><p id="idp12504208">
        Windows is not currently supported by the examples in Real World
        OCaml, although it is being worked on. Until that's ready, we
        recommend using a virtual machine running Debian Linux on your
        local machine.
      </p></section><section><h1 id="building-from-source">Building from source</h1><p id="idp12506080">
        To install OCaml from source code, first make sure that you have
        a C compilation environment (usually either
        <code>gcc</code> or <code>llvm</code> installed).
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> curl -OL https://github.com/ocaml/ocaml/archive/4.01.tar.gz
</div><div class="highlight"><span class="gp">$</span> tar -zxvf 4.01.tar.gz
</div><div class="highlight"><span class="gp">$</span> <span class="nb">cd </span>ocaml-4.01
</div><div class="highlight"><span class="gp">$</span> ./configure
</div><div class="highlight"><span class="gp">$</span> make world world.opt
</div><div class="highlight"><span class="gp">$</span> sudo make install
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/ocaml_src_install.out">installation/ocaml_src_install.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12508752">
        The final step requires administrator privilege to install in
        your system directory. You can also install it in your home
        directory by passing the <code>prefix</code> option to the
        configuration script:
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> ./configure -prefix <span class="nv">$HOME</span>/my-ocaml
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/ocaml_user_conf.out">installation/ocaml_user_conf.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12510816">
        Once the installation is completed into this custom location,
        you will need to add <code>$HOME/my-ocaml/bin</code> to
        your <code>PATH</code>, normally by editing the
        <code>~/.bash_profile</code> file. You shouldn't really to
        do this unless you have special reasons, so try to install
        binary packages before trying a source installation.
      </p><aside class="note"><h1>
      Note to reviewers
      </h1><p id="idp12514320">
        We instruct you to install the unreleased 4.01 branch version of
        OCaml in these instructions, as we take advantage of some recent
        additions to the language that simplify explanations in the
        book. The 4.01 release will happen before the book is released,
        but you may run into &quot;bleeding edge&quot; bugs with the
        release. Leave a comment here if you do and we'll address them.
      </p></aside></section></section><section><h1 id="getting-opam">Getting OPAM</h1><p id="idp12516896">
      OPAM manages multiple simultaneous OCaml compiler and library
      installations, tracks library versions across upgrades, and
      recompiles dependencies automatically if they get out of date.
      It's used throughout Real World OCaml as the mechanism to retrieve
      and use third-party libraries.
    </p><p id="idp12517616">
      Before installing OPAM, make sure that you have the OCaml compiler
      installed as described above. Once installed, the entire OPAM
      database is held in your home directory (normally
      <code>$HOME/.opam</code>). If something goes wrong, just
      delete this <code>.opam</code> directory and start over from
      a clean slate. If you're using a beta version of OPAM, please
      upgrade it to at least version 1.0.0 or greater before proceeding.
    </p><section><h1 id="mac-os-x-1">Mac OS X</h1><p id="idp12520896">
        Source installation of OPAM will take a minute or so on a modern
        machine. There is a Homebrew package for the latest OPAM:
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> brew update
</div><div class="highlight"><span class="gp">$</span> brew install opam
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/brew_opam_install.out">installation/brew_opam_install.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12522176">
        And on MacPorts, install it like this:
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> sudo port install opam
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/macports_opam_install.out">installation/macports_opam_install.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div></section><section><h1 id="debian-linux-1">Debian Linux</h1><p id="idp12524688">
        OPAM has recently been packaged for Debian and will soon be part
        of the unstable distribution. If you're on an earlier stable
        distribution such as <code>wheezy</code>, you can either
        compile from source, or cherry-pick just the OPAM binary package
        from <code>unstable</code> by:
      </p><div class="rwocode"><pre><code><div class="rwocodeout"># apt-get update</div><div class="rwocodeout"># apt-get -t unstable install opam</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/debian_apt_opam.out">installation/debian_apt_opam.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div></section><section><h1 id="ubuntu-raring">Ubuntu Raring</h1><p id="idp12528800">
        OPAM is available as a Personal Package Archive on Ubuntu Raring
        for both i386 and x86_64. To install it, just run:
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> add-apt-repository ppa:avsm/ppa
</div><div class="highlight"><span class="gp">$</span> apt-get update
</div><div class="highlight"><span class="gp">$</span> apt-get install ocaml opam
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/ubuntu_opam_ppa.out">installation/ubuntu_opam_ppa.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div></section><section><h1 id="fedora-and-red-hat-1">Fedora and Red Hat</h1><p id="idp12531360">
        There is currently no RPM available for Fedora or Red Hat, so
        please install OPAM via the source code instructions for the
        moment.
      </p></section><section><h1 id="arch-linux-1">Arch Linux</h1><p id="idp12533200">
        OPAM is available in the Arch User Repository (AUR) in two
        packages. You'll need both <code>ocaml</code> and the
        <code>base-devel</code> packages installed first:
      </p><ul><li><p id="idp12535664">
<code>opam</code> contains the most recent stable
            release, and is the recommended package.
          </p></li><li><p id="idp12537232">
<code>opam-git</code> builds the package from the
            latest upstream source, and should only be used if you are
            looking for a specific bleeding-edge feature.
          </p></li></ul><p id="idp12538752">
        Run these commands to install the stable OPAM package:
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> sudo pacman -Sy base-devel
</div><div class="highlight"><span class="gp">$</span> wget https://aur.archlinux.org/packages/op/opam/opam.tar.gz
</div><div class="highlight"><span class="gp">$</span> tar -xvf opam.tar.gz <span class="o">&amp;&amp;</span> <span class="nb">cd </span>opam
</div><div class="highlight"><span class="gp">$</span> makepkg
</div><div class="highlight"><span class="gp">$</span> sudo pacman -U opam-&lt;version&gt;.tar.gz
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/arch_opam.out">installation/arch_opam.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div></section><section><h1 id="source-installation">Source Installation</h1><p id="idp12541168">
        If the binary packages aren't available for your system, you'll
        need to install the latest OPAM release from source. You can
        follow the online
        <a href="http://opam.ocamlpro.com/doc/Quick_Install.html" target="_top">quick
        install guide</a>.
      </p></section></section><section><h1 id="configuring-opam">Configuring OPAM</h1><p id="idp12543920">
      The entire OPAM package database is held in the
      <code>.opam</code> directory in your home directory,
      including compiler installations. On Linux and Mac OS X, this will
      be the <code>~/.opam</code> directory. You shouldn't switch
      to an admin user to install packages as nothing will be installed
      outside of this directory. If you run into problems, just delete
      the whole <code>~/.opam</code> directory and follow the
      installations instructions from the <code>opam init</code>
      stage again.
    </p><p id="idp12547616">
      Let's begin by initialising the OPAM package database. This will
      require an active Internet connection, and ask you a few
      interactive questions at the end. It's safe to answer yes to these
      unless you want to manually control the configuration steps
      yourself as an advanced user.
    </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> opam init
</div><div class="rwocodeout">&lt;...&gt;</div><div class="rwocodeout">=-=-=-= Configuring OPAM =-=-=-=</div><div class="rwocodeout">Do you want to update your configuration to use OPAM ? [Y/n] y</div><div class="rwocodeout">[1/4] Do you want to update your shell configuration file ? [default: ~/.profile] y</div><div class="rwocodeout">[2/4] Do you want to update your ~/.ocamlinit ? [Y/n] y</div><div class="rwocodeout">[3/4] Do you want to install the auto-complete scripts ? [Y/n] y</div><div class="rwocodeout">[4/4] Do you want to install the `opam-switch-eval` script ? [Y/n] y</div><div class="rwocodeout">User configuration:</div><div class="rwocodeout">  ~/.ocamlinit is already up-to-date.</div><div class="rwocodeout">  ~/.profile is already up-to-date.</div><div class="rwocodeout">Gloabal configuration:</div><div class="rwocodeout">  Updating &lt;root&gt;/opam-init/init.sh</div><div class="rwocodeout">    auto-completion : [true]</div><div class="rwocodeout">    opam-switch-eval: [true]</div><div class="rwocodeout">  Updating &lt;root&gt;/opam-init/init.zsh</div><div class="rwocodeout">    auto-completion : [true]</div><div class="rwocodeout">    opam-switch-eval: [true]</div><div class="rwocodeout">  Updating &lt;root&gt;/opam-init/init.csh</div><div class="rwocodeout">    auto-completion : [true]</div><div class="rwocodeout">    opam-switch-eval: [true]</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/opam_init.out">installation/opam_init.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12549056">
      You only need to run this command once, and it will create the
      <code>~/.opam</code> directory and sync with the latest
      package list from the online OPAM database.
    </p><p id="idp12550336">
      When the <code>init</code> command finishes, you'll see some
      instructions about environment variables. OPAM never installs
      files into your system directories (which would require
      administrator privileges). Instead, it puts them into your home
      directory by default, and can output a set of shell commands which
      configures your shell with the right <code>PATH</code>
      variables so that packages will just work.
    </p><p id="idp12552560">
      If you choose not to follow the OPAM instructions to add itself to
      your shell profile, you can still configure it on-the-fly in your
      current shell with just one command.
    </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> <span class="nb">eval</span> <span class="sb">`</span>opam config env<span class="sb">`</span>
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/opam_eval.out">installation/opam_eval.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12553872">
      This evaluates the results of running
      <code>opam config env</code> in your current shell and sets
      the variables so that subsequent commands will use them. This
      <span><em>only</em></span> works with your current shell and it can
      be only be automated for future shells by adding the line to your
      login scripts. On Mac OS X or Debian, this is usually the
      <code>~/.bash_profile</code> file if you're using the
      default shell. If you've switched to another shell, it might be
      <code>~/.zshrc</code> instead. OPAM isn't unusual in this
      approach; the SSH <code>ssh-agent</code> also works
      similarly, so if you're having any problems just hunt around in
      your configuration scripts to see how that's being invoked.
    </p><p id="idp12558192">
      If you answered <code>yes</code> to the auto-complete
      scripts question during <code>opam init</code>, this should
      have all been set up for you. You can verify this worked by
      listing the available packages:
    </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> opam list
</div><div class="rwocodeout">Installed packages for 4.01.0:</div><div class="rwocodeout">async                  109.38.00  Monadic concurrency library</div><div class="rwocodeout">async_core             109.38.00  Monadic concurrency library</div><div class="rwocodeout">async_extra            109.38.00  Monadic concurrency library</div><div class="rwocodeout">&lt;...&gt;</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/opam_list.out">installation/opam_list.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><aside class="note"><h1>
    Note to reviewers
    </h1><p id="idp12561568">
      OPAM 1.0.0 places the login commands into your
      <code>~/.profile</code> directory, which isn't always
      executed if your shell is <code>bash</code>. This has been
      fixed in subsequent versions, but for now you'll need to manually
      copy the contents of <code>~/.profile</code> over to
      <code>~/.bash_profile</code>.
    </p></aside><p id="idp12565184">
      The most important package we need to install is Core, which is
      the replacement standard library that all of the examples in this
      book use. Before doing this, let's make sure you have exactly the
      right compiler version you need.
    </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> opam switch 4.01.0dev+trunk
</div><div class="highlight"><span class="gp">$</span> <span class="nb">eval</span> <span class="sb">`</span>opam config env<span class="sb">`</span>
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/opam_switch.out">installation/opam_switch.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12566560">
      This step will take around ten or fifteen minutes on a modern
      machine, and will download and install the OCaml compiler within
      the <code>~/.opam</code> directory). OPAM supports multiple
      compiler installations, and you'll find this very useful if you
      ever decide to hack on the internals of the compiler or want to
      experiment with the latest release without sacrificing your
      current installation. You only need to install this compiler once,
      and future updates will be much faster as they only recompile
      libraries within the compiler installation.
    </p><p id="idp12568240">
      The new compiler will be installed into
      <code>~/.opam/4.01.0beta1</code> and any libraries you
      install for it will be tracked separately from your system
      installation. You can have any number of compilers installed
      simultaneously, but only one can be active at any time. Browse
      through the available compilers by running
      <code>opam switch list</code>.
    </p><p id="idp12570384">
      Finally, we're ready to install the Core libraries. Run this:
    </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> opam install core core_extended core_bench async
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/opam_install.out">installation/opam_install.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12571584">
      This will take about five or ten minutes to build, and will
      install a series of packages. OPAM figures out the dependencies
      you need automatically, but the three packages that really matter
      are:
    </p><ul><li><p id="idp12572720">
<code>core</code> is the main, well-supported Core
          distribution from Jane Street.
        </p></li><li><p id="idp12574272">
<code>core_bench</code> is a benchmarking library that
          makes it easy to test the performance profile of functions via
          a command-line interface.
        </p></li><li><p id="idp12575888">
<code>core_extended</code> contains a number of
          experimental, but useful, extension libraries that are under
          review for inclusion in Core. We use some of these in places,
          but much less than Core itself.
        </p></li><li><p id="idp12577568">
<code>async</code> is the network programming library
          that we use in Part II to communicate with other hosts. You
          can skip this for the initial installation until you get to
          Part II, if you prefer.
        </p></li></ul></section><section><h1 id="editing-environment">Editing Environment</h1><p id="idp12580416">
      There's one last tool you need before getting started on the
      examples. The default <code>ocaml</code> command gives us an
      interactive command-line to experiment with code without compiling
      it. However, it's quite a spartan experience and so we use a more
      modern alternative.
    </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> opam install utop
</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/opam_install_utop.out">installation/opam_install_utop.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12582544">
      The <span><strong>utop</strong></span> package is an interactive command-line
      interface to OCaml that has tab-completion, persistent history and
      integration with Emacs so that you can run it within your editing
      environment.
    </p><p id="idp12583872">
      Remember from earlier that OPAM never installs files directly into
      your system directories, and this applies to
      <span><strong>utop</strong></span> too. You'll find the binary in
      <code>~/.opam/4.01.0beta1/bin</code>. However, typing in
      <span><strong>utop</strong></span> from your shell should just work, due to
      the <code>opam config env</code> step that configures your
      shell. Don't forget to automate this as described earlier as it
      makes life much easier when developing OCaml code!
    </p><section><h1 id="command-line">Command Line</h1><p id="idp12588640">
        The <span><strong>utop</strong></span> tool provides a convenient
        interactive toplevel, with full command history, command macros
        and module name completion. When you first run
        <span><strong>utop</strong></span>, you'll find yourself at an interactive
        prompt with a bar at the bottom of the screen. The bottom bar
        dynamically updates as you write text, and contains the possible
        names of modules or variables that are valid at that point in
        the phrase you are entering. You can press the
        <code>&lt;tab&gt;</code> key to complete the phrase with
        the first choice.
      </p><p id="idp12591712">
        The <code>~/.ocamlinit</code> file in your home directory
        initialises <span><strong>utop</strong></span> with common libraries and
        syntax extensions so you don't need to type them in every time.
        Now that you have Core installed, you should update it to load
        it every time you start <span><strong>utop</strong></span>, by adding this
        to it:
      </p><div class="rwocode"><pre><code><div class="highlight"><span class="gp">$</span> cat ~/.ocamlinit
</div><div class="rwocodeout">#use &quot;topfind&quot;</div><div class="rwocodeout">#thread</div><div class="rwocodeout">#camlp4o</div><div class="rwocodeout">#require &quot;core.top&quot;</div><div class="rwocodeout">#require &quot;core.syntax&quot;</div></code></pre><div class="rwocodeinfo">Terminal ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/show_ocamlinit.out">installation/show_ocamlinit.out</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12595248">
        If you only use Core libraries (and this will be the case for
        beginners who are working their way through Real World OCaml as
        their first taste of the language), then you can also open the
        Core module by default. Just append this line to the
        <code>.ocamlinit</code> file.
      </p><div class="rwocode"><pre><code><span class="keyword1">open</span> <span class="keyword5">Core.</span>Std</code></pre><div class="rwocodeinfo">OCaml ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/open_core.ml">installation/open_core.ml</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12597376">
        When you run <span><strong>utop</strong></span> with these initialization
        rules, it should start up with Core opened and ready to use. If
        you don't open <code>Core.Std</code> by default, then you
        must remember to open it before running any of the interactive
        examples in the book.
      </p></section><section><h1 id="editors">Editors</h1><aside class="note"><h1>
      Note to reviewers
      </h1><p id="idp12601360">
        The instructions for editor setup are still being compiled. If
        you have a relevant tip or HOWTO, then we'd
        <span><em>really</em></span> appreciate you leaving a note here
        with a pointer or direct instructions.
      </p></aside><section><h1 id="emacs">Emacs</h1><p id="idp12603648">
          Emacs users have tuareg and
          <a href="http://www.typerex.org/" target="_top">Typerex</a>.
        </p><p id="idp12604816">
          To use <span><strong>utop</strong></span> directly in Emacs, add the
          following line to your <code>~/.emacs</code> file:
        </p><div class="rwocode"><pre><code><div class="highlight"><span class="p">(</span><span class="nf">autoload</span> <span class="ss">'utop</span> <span class="s">&quot;utop&quot;</span> <span class="s">&quot;Toplevel for OCaml&quot;</span> <span class="nv">t</span><span class="p">)</span>
</div></code></pre><div class="rwocodeinfo">Scheme ∗ <a href="http://github.com/realworldocaml/examples/blob/master/code/installation/emacsrc.scm">installation/emacsrc.scm</a>  ∗ <a href="http://github.com/realworldocaml/examples/">all code</a></div></div><p id="idp12607440">
          You also need to make the <code>utop.el</code> file
          available to your Emacs installation. The OPAM version of
          <span><strong>utop</strong></span> installs it into the
          <code>~/.opam</code> hierarchy, for example in
          <code>~/.opam/system/share/emacs/site-lisp/utop.el</code>.
          You may need to replace <code>system</code> with your
          current compiler switch, such as
          <code>4.01.0beta1</code>.
        </p><p id="idp12612384">
          Once this successfully loads in Emacs, you can run utop by
          executing the command <span><strong>utop</strong></span> in Emacs. There
          are more details instructions at the
          <a href="https://github.com/diml/utop#integration-with-emacs" target="_top">utop
          homepage</a>.
        </p></section><section><h1 id="vim">Vim</h1><p id="idp12615664">
          Vim users can use the built-in style, and
          <a href="http://github.com/avsm/ocaml-annot" target="_top">ocaml-annot</a>
          may also be useful.
        </p></section><section><h1 id="eclipse">Eclipse</h1><p id="idp12618128">
          Eclipse is a popular IDE usually used for Java development.
          The OCaml Development Tools (ODT) project provides equivalent
          IDE features for editing and compiling OCaml code, such as
          automatic compilation and name completion.
        </p><p id="idp12618800">
          ODT is distributed as a set of plugins for the Eclipse IDE
          environment from the
          <a href="http://ocamldt.free.fr" target="_top">homepage</a>. You just
          have to copy these plugins into your Eclipse distribution in
          order to access the new OCaml facilities.
        </p></section></section></section>


                
            </article>
            
            
    
                <nav class="pagination">
                    
                        <a rel="previous" href="the-compiler-backend-byte-code-and-native-code.html">
                            &lt; Previous
                        </a>
                    
                    
                </nav>
            
            
            
            <footer class="footer">
                <p>Copyright 2012-2013, Jason Hickey, Anil Madhavapeddy and Yaron Minsky. Licensed under <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/us/">CC BY-NC-ND 3.0 US</a>.</p>
            </footer>
            
        </div>
    
    </body>

</html>